((e,t,a,n,r,i)=>{let[o,l,d,s,c,p,h,m,g,y,b,x,f,u,w,v,k]="familyxgetAttributexhasAttributexgetFullYearxshadowRootxnamexmonthxeventxcalendarxbackgroundxhighlightxbranchxcolorxxpersonxpartnersxdeath"[r]("x"),[,$,M]=e.currentScript.src[r]("/").reverse(),z=new URL(e.currentScript.src),L=(e,t=e)=>z.searchParams.get(e)||t,A=(e,t)=>e+"-"+t,H="ex",D="current"+h,T=(e,t)=>`${e}\n  {${t}}\n`,S=(e,a=q[e])=>`\n  var(--${e},${t.getItem(e)||a})`,C=e=>`[${e}]`,I=e=>`:not(${e})`,N=e=>`:host(${e}) `,j=e=>`[part~="${e}"]`,E=(e,t)=>e?t:"not"+t,F=(e,t)=>y+":"+S(e)+(t?`;${f}:${S(t)}`:u),P=A(g,y),R=A(g,f),O=A(h,y),U=A(b,y),W=A(b+o,y),Y=A(b+"hover",y),q={[P]:"#bbbb66",[R]:"#000077",[O]:"#eeeeaa",[U]:"#99aaee",[W]:"#90dddd",[Y]:"#ffaa00"};i[M][$](L(A(o,g)),class extends HTMLElement{connectedCallback(a){let i=this,y=e=>n(e.children),b=(e,t)=>e.querySelectorAll(t),f=(t,a={},n=[],r={},i=e.createElement(t))=>(Object.entries(r).map((([e,t])=>i.setAttribute(e,t))),i.append(...n.flat(9)),Object.assign(i,a)),$=(e,t=u)=>i[e]=f("style",{id:e,innerHTML:t}),M=(e,t=u)=>f("slot",{name:e,innerHTML:t}),z=(e,t=u)=>i[d](e)?i[l](e):t,[q,B,G,J,K,Q,V,X,Z,_,ee,te,ae,ne,re,ie,oe,le,de,se,ce,pe,he,me,ge]=[[g,"body"],[g,"header"],[o,x],[g,"grid"],[g,h],[m,w],[m,v],[m,k],["day",m],[h,p],[h,"events"],[m,"day"],[m,"year"],[m,"label"],[m+"label",p],[m,"age"],[k,"year"],[m,"icon"],["emoji","icon"],["relation","label"],["icon","bar"],["iconbar","icon"],[m,"column"],[x,p]].map((([e,t])=>L("prefix",z("prefix"))+L(A(e,t),A(e,t)))),ye=new Date(z("today",((e,t=e)=>new URLSearchParams(location.search).get(e)||t)(A(g,"today"),new Date))),be=z("emoji","ðŸ§,ðŸ‘¦ðŸ»,ðŸ’˜,â¤ï¸,ðŸª¦,â™°,ðŸ’”,ðŸŽ‚,ðŸ‘¨â€ðŸ‘©â€ðŸ‘§,â¯ï¸")[r](","),xe=1;i.person=(e,t=e[r]("-")[0])=>b(i.grid,Q+C(`id^="${t}"`))[0],i.grid=i.grid||0,i.show=e=>{if("string"==typeof e&&(e=i.person(e)),!e)return;e.data.branch&&(e=e.data.branch),t.setItem(x,i[ge].innerHTML=e[0]);let[a,n]=e,r=e=>j(e);e.length<4&&(n=a),i[Ae].innerHTML=T(N(C("show"+x))+j(m)+I(r(n)),"display:none")+T(r(n),"display:block;opacity:1;"+F(W))+T(r(a),"display:inline-block;"+F(U))+T(j(H)+j(H)+I(r(n)),"display:none")+T(j(H)+" "+de,"filter:grayscale(100%)")};let fe,ue=(e,t)=>t[s]()-e[s]()-(t.getMonth()<e.getMonth()||t.getMonth()==e.getMonth()&&t.getDate()<e.getDate()),we=e=>{if(e){let[t,a,n]=String(e)[r]("-").map((e=>+e));0!=a&&0!=n||(a=1,n=1);let i=new Date(t,a-1,n),o=ye||new Date,l=new Date(o[s](),a-1,n),d=Math.ceil((l-o)/864e5);return d<0&&(d=Math.ceil((l.setFullYear(l[s]()+1)-o)/864e5)),{date:i,days:d,age:ue(i,o),year:t,month:a,day:n}}},ve=$(),ke=$(),$e=0,Me=e=>e.textContent.trim(),ze=(e,t)=>n(e.attributes).map((e=>t.setAttribute(e.name,e.value))),Le=""+g,Ae=""+x,He="user",De=async(e,t)=>{if(e=e?.trim()){$e++;for(let a of e[r](",")){let e=a[r]("/"),n=e.pop(),i=fe||(fe=e.length?e.join("/")+"/":u),o=await fetch(i+n);o.ok&&Te(await o.text(),t)}--$e||Se()}},Te=(e=u,t=ve,a=f(x,{innerHTML:e}))=>{for(let e of b(a,x+":empty"))De(e[l]("file"),e);t.append(a)},Se=(e=e=>e[l](k))=>{ke.append(...y(ve).map((function t(a,n=a[l](p)||Me(a)||p,r,i,o=a.localName,[s=a,c=s]=y(a),h){if(o==v?(i=f(V,{},[],e(s)||e(c)?{[k]:e(s)||e(c)}:{}),a[d]("end")?c.setAttribute(H,Me(s)):(s.partner=c,c.partner=s)):o==w||"child"==o?i=f(Q,{},[e(a)?f(X,{src:i,data:{src:a,name:n,born:we(a[l]("date"))}},[],{date:e(a)}):u]):o==x?i=f(G,{},[],{[p]:n=a[l](p)||Me(b(a,w)[0])}):o==m&&(i=f(Z)),i){i.data={name:n,src:a},ze(a,i);for(let e of y(a))(h=t(e))&&i.append(h)}return i})));let t=(a,r=[],{localName:o,data:s}=a,c=(a[l](p)||u).replace(/[^a-z]/gi,u),h=(o==G?[...r,c]:r),g,b)=>{if(s.branch=n(new Set(h)).reverse(),o!=G&&(s.event=we(a[l]("date")),s.death=we(e(s.src)),g=s.event)){let e,{name:t,born:n,branch:r,death:l,src:c,event:{days:p,age:h}}=s,y=t.normalize("NFD").replace(/[^a-z]/gi,u)+"-"+(n||g).year+"-"+(n||g).month+"-"+(n||g).day,x=r[t==r[0]?1:0],w=e=>f(de,{},[be[e]]),v=!l&&p<z("days",1),$=E(0==p,"today"),L=[m,o],A=e=>L.push(e);o==X?A(k):o==Q?(a[d](H)&&A(H),l?A(k):(A(E(v,"upcoming")),v&&A($))):o==Z?x=u:o==V&&(e=2,A($),c[d]("end")&&(e=6,A(H)),a[d](k)&&(A(k),v=u)),o!=V&&(c[d](H)?(e=6,x=t==Me(c.parentNode?.children[0])?r.at(1):x):c.partner?(e=3,x=Me(c.partner)):e=1),(b=f(o,{host:i,id:y,data:{...a.data},onclick:()=>i.show(b)},[f(te,{},[g.day]),f(ae,{},["'"+g.year%100]),f(ne,{},[o==X?w(5):v?[w(0),f(ie+"today",{part:$},[h+1])]:u,f(re,{},[" ",o==V?[Me(c.children[0])," ",w(e)," ",Me(c.children[1])]:t]),l&&o!=X?[f(oe,{},[" ",w(5)," '",l.year%100])]:u]),f(he,{},o==V?[]:[f(le,{},[w(e)]),f(se,{},[x])]),f(ie,{part:he+" "+$},[v?h:o==X?ue(n.date,l.date):l?ue(g.date,l.date):h]),f(me,{},[M(y)])])).part.add(...L,...r),ze(a,b),(b=i.createElement(b))&&i.events[g.month-1].push(b)}y(a).map((e=>t(e,h)))};y(ke).map((e=>t(e))),Ce()},Ce=()=>{i.months.map(((e,t)=>{e.replaceChildren(...i.events[t].sort(((e,t)=>e.data.event.day-t.data.event.day)))})),i.show(z(x,t.getItem(x)))};i.grid||(i[c].innerHTML=u,i[c].append($(Le,T(":host",`display:inline-block;width:100%;height:100%;box-sizing:border-box;position:relative;user-select:none;font:${S(A(g,"fontsize"),"clamp(11px,1.05vw,13px)")}arial;border:3px solid ${S(P)};`+F(P,R)+";animation:f 1s")+T("@keyframes f","from{opacity:0}to{opacity:1}")+T(":host([hidden]),[hidden]","display:none!important")+T(q,"display:flex;flex-direction:column")+T(J,"gap:3px;display:grid;grid-template-columns:repeat(var(--c,4),1fr)")+T("@media(max-width:900px)",T(J,"--c:3;font-size:110%"))+T("@media(max-width:800px)",T(J,"--c:2;font-size:130%"))+T("@media(max-width:600px)",T(J,"--c:1;font-size:130%"))+T(K,F(O))+T(_,"display:inline-block;width:100%;text-align:center;text-transform:uppercase;"+F(P))+T(_+j(D),"font-weight:bold")),$("iconbar",T(B+">*","display:inline-block;font-size:2.8em")+T(pe,"filter:grayscale(100%);cursor:pointer")+T(B,`position:sticky;top:0;z-index:1;width:100%;text-align:center;background:${S(P)}`)),$("event",T(j(m),`border-bottom:1px dashed ${S(P)};display:inline-block;width:100%;padding:1px;box-sizing:border-box;\n&:hover{cursor:pointer;${F(Y)}}`)+T(j(m)+j("today"),F(P))+T(j(m)+j("today")+" "+ie,"display:none")+T(te+","+ae+","+ie+","+le,"display:inline-block;width:1.7em;text-align:right")+T(ie+","+he,"float:right")+T(V+" "+ie+","+N(I(C("showrelation")))+ie,"padding-right:7em")+T(ne,"padding-left:1em;font-weight:bold")+T(re,"text-transform:capitalize")+T(ae+","+de,"zoom:.9")+T(se,"display:inline-block;width:6em;zoom:.9")+T(j(k),"opacity:.7;&:hover{opacity:1}")+T(V+j(k)+" "+ie,"display:none")),$("attr",z("css")),$(He),$(Ae),f(q,{},[M("header",`<h1 style='text-align:center'>${i.title}</h1>`),f(B,{},[M("WH",`W:${screen.width} H:${screen.height}`),i[ce]=f(ce,{},[[1,2,v,V],[0,4,k,X],[1,7,"age",ie],[1,1,"relation",he],[0,8,x,m],[1,9,"c"]].map((([e,a,n,r,o="show"+n,l=i.toggleAttribute(o,t.getItem(o)?"true"==t.getItem(o):i[d](o)||e)])=>[$(o,T(N(C(o))+j(o),"filter:none")+T(N(I(C(o)))+r,"display:none")),f(pe,{part:pe+" "+o,onclick:()=>{r?t.setItem(o,i.toggleAttribute(o)):i.grid.style.setProperty("--c",++xe>4?xe=1:xe)}},[be[a],8==a?i[ge]=f(ge):u])])))]),i.grid=f(J,{part:J},[i.events.map(((e,t,a,n=t==ye.getMonth(),r=E(n,D))=>f(K,{part:r+" "+K},[M(h+(t+1)),f(_,{part:r+" "+_},[n?ye.getDate():u," ",new Date(1,t,1).toLocaleString(z(h,navigator.language),{[h]:"long"})," ",n?ye[s]():u]),M(ee+(t+1)),i.months[t]=f(ee,{part:r+" "+ee})])))]),M("footer")])),b(e,"#"+i.localName)?.[0]&&(i[He].innerHTML=b(b(e,"#"+i.localName)?.[0].content,"style")[0].innerHTML),i[c].append(...b(i,"style")));let Ie=z(o);a?(Te(a),Se()):Ie&&De(Ie),Ce(),setTimeout((()=>{}),100)}static observedAttributes=[o,x];constructor(){super().attachShadow({mode:"open"}),this.events=[[],[],[],[],[],[],[],[],[],[],[],[]],this.months=[]}set[o](e){e.includes(x)?this.connectedCallback(e):this.setAttribute(o,e)}attributeChangedCallback(e,t,a,n,r=this){r.isConnected&&(e==x?r.show(a):e==o&&r.connectedCallback(a))}createElement(e){return e}})})(document,localStorage,0,Array.from,"split",window);